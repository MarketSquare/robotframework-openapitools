<!DOCTYPE html>
<html lang="en">

<head>
    <title>Robot Framework OpenApiTools documentation</title>
    <!-- Get the flavicon -->
    <link href="https://robotframework.org/img/icons/favicon-32x32.png" rel="icon" type="image/png">
    <!-- Get the fonts -->
    <link href="https://fonts.cdnfonts.com/css/ocr-a-std" rel="stylesheet">
    <link href="https://fontlibrary.org//face/courier-code" rel="stylesheet" />
    <!-- Code highlighting -->
    <link href="code_highlighting/prism.css" rel="stylesheet" />

    <style>
        @import url("https://fonts.cdnfonts.com/css/ocr-a-std");
        @import url("https://fontlibrary.org//face/courier-code");

        :root {
            color-scheme: light dark;
            --font-title: "OCR A Std", sans-serif;
            --font-body: "CourierCodeRoman";
            --color-theme: light-dark(#00c0b5, #00c0b5);
            --color-link: light-dark(#00857e, #00c0b5);
            --color-black: #000;
            --color-white: #f5f5f5;
            --color-grey-light: #e7e7e7;
            --color-grey-dark: #292f33;
            --color-background: light-dark(#f0f0f0, #222);
            --color-background-secondary: light-dark(#fff, #2b2b2b);
            --font-size-body: 1rem;
            --line-height-body: 1.75;
            --font-size-banner: 6rem;
            --font-weight-banner: 900;
            --font-size-tablinks: 0.875rem;
            --padding-very-small: 0.5rem;
            --padding-small: 0.75rem;
            --padding-normal: 1rem;
            --padding-large: 2.25rem;
            --border-radius-rounded: 0.2rem;
        }

        html {
            font-size: 100%;
        }

        nav {
            float: left;
            width: 20%;
            padding: 20px;
        }

        article {
            float: left;
            width: 80%;
            padding: 20px;
        }

        body {
            color: light-dark(var(--color-black), var(--color-white));
            background-color: var(--color-background);
            font-size: var(--font-size-body);
            font-family: var(--font-body);
            line-height: var(--line-height-body);
        }

        .flex-container {
            display: flex;
        }

        .banner {
            width: 100%;
            background-color: var(--color-theme);
            font-family: var(--font-title);
            font-weight: var(--font-weight-banner);
            font-size: var(--font-size-banner);
            text-align: center;
        }

        .color-white {
            color: var(--color-white)
        }

        .color-black {
            color: var(--color-black)
        }

        .secondary-background {
            background-color: var(--color-background-secondary);
            padding: var(--padding-large)
        }

        .sidenav {
            color: light-dark(var(--color-grey-dark), var(--color-grey-light));
            background-color: var(--color-background);
        }

        a {
            color: var(--color-link)
        }

        hr {
            border: solid 2px var(--color-theme);
            border-radius: 4px;
        }

        .code-block {
            background-color: light-dark(var(--color-grey-light), var(--color-grey-dark));
            padding: 0 var(--padding-normal)
        }

        .sidenav a:link,
        .sidenav a:visited {
            background-color: var(--color-background-secondary);
            color: light-dark(var(--color-black), var(--color-white));
            padding: 14px 25px;
            border: 1px outset var(--color-link);
            border-radius: 4px;
            text-align: left;
            text-decoration: none;
            display: block;
        }

        .sidenav a:hover,
        .sidenav a:active {
            color: var(--color-theme);
        }

        .tablinks {
            color: var(--color-black);
            background-color: var(--color-white);
            text-transform: uppercase;
            box-shadow: rgba(0, 0, 0, 0.1) 2px 4px 3px -1px, rgba(0, 0, 0, 0.04) 6px 6px 15px -1px;
            font-family: var(--font-title);
            border-radius: var(--border-radius-rounded);
            transition: color 0.2s, background-color 0.1s, box-shadow 0.1s;
            padding: var(--padding-very-small) var(--padding-normal);
            font-size: var(--font-size-tablinks);
            margin-bottom: var(--padding-small);
            margin-right: var(--padding-normal);
        }

        .tablinks.active {
            color: var(--color-white);
            background-color: var(--color-theme);
            box-shadow: rgba(0, 0, 0, 0.2) 2px 3px 2px -1px inset;
        }
    </style>
</head>

<body>
    <header>
        <h1 class="banner">
            <div class="color-white">ROBOT FRAMEWORK</div>
            <div class="color-black">OPENAPITOOLS</div>
        </h1>
    </header>

    <div class="flex-container">
        <nav class="sidenav">
            <h3>Keyword documentation quicklinks</h3>
            <a href="openapidriver.html" target="_blank">OpenApiDriver</a>
            <a href="openapi_libcore.html" target="_blank">OpenApiLibCore</a>
        </nav>

        <article>
            <p>OpenApiTools is a set of libraries centered around the OpenAPI Specification</p>

            <div class="tab">
                <button class="tablinks" onclick="openDocs(event, 'libgen')" id="defaultOpen">OpenApiLibGen</button>
                <button class="tablinks" onclick="openDocs(event, 'driver')">OpenApiDriver</button>
                <button class="tablinks" onclick="openDocs(event, 'libcore')">OpenApiLibCore</button>
            </div>
            <div id="libgen" class="tabcontent">
                <div class="secondary-background">
<h1>OpenApiLibGen for Robot Framework</h1>

OpenApiLibGen is a command-line tool that can be used to generate a Robot Framework
library based on an OpenAPI document.

<hr>

In a (virtual) environment where <code>robotframework-openapitools</code> is installed
the <code>generate-library</code> shell command is availabe:

<div class="code-block"><pre><code class="language-shell">
$ generate-library -h
usage: openapi_libgen [-h] [-s SOURCE] [-d DESTINATION] [-n NAME] [--recursion-limit RECURSION_LIMIT]
                      [--recursion-default RECURSION_DEFAULT]

The OpenApiTools library generator

options:
  -h, --help            show this help message and exit
  -s SOURCE, --source SOURCE
  -d DESTINATION, --destination DESTINATION
  -n NAME, --name NAME
  --recursion-limit RECURSION_LIMIT
  --recursion-default RECURSION_DEFAULT

Inspired by roboswag. Thank you Bartlomiej and Mateusz for your work!
</code></pre></div>

Generation of your library is an interactive process with a few steps:

<div class="code-block"><pre><code class="language-shell">
$ generate-library
Please provide a source for the generation:
$ http://127.0.0.1:8000/openapi.json
Please provide a path to where the library will be generated:
$ ./generated
Please provide a name for the library [default: FastAPI]:
$ My Generated Library
generated/MyGeneratedLibrary/__init__.py created
generated/MyGeneratedLibrary/my_generated_library.py created
</code></pre></div>

<div><codeblock>
Tip: The name for the  library that you provide (or that's taken from the OpenAPI document)
will be transformed into a Python-legal module name and a Python-legal class name.
This means special characters like <code>-</code> will be removed or replaced.
If you used spaces in the desired name, they will be removed from the Library (class) name
and the next character will be capitalized while the spaces will be replaced with an
underscore in the module name as can be seen in the example above.
</codeblock></div>

<div><pre><codeblock><i>
Note: There's currently 2 environment variables that are taken into account by the generator:
    <code>USE_SUMMARY_AS_KEYWORD_NAME</code> can result in nicer keyword names (but: uniqueness is not guaranteed, so you might need to rename some of the generated keywords manually)
    <code>EXPAND_BODY_ARGUMENTS</code> changes how body arguments are provided to keywords (either a single body dict or key-value pairs for the body parameters)
</i><pre></codeblock></div>

<hr>

If the location where the library is located is in your Python search path, you'll be able
to use it like a regular Robot Framework library (in fact, it's a drop-in replacement for
OpenApiLibCore).

The generated library has a keyword for every endpoint in the OpenAPI document used to generated it.
In addition, all the keywords from OpenApiLibCore are available.
<blockquote>
Keyword documentation for OpenApiLibCore can be found <a href="openapi_libcore.html" target="_blank">here</a>.
</blockquote>

The generated library can be used as shown below:

<div class="code-block"><pre><code class="language-robotframework">
*** Settings ***
Library         MyGeneratedLibrary
...                 source=${ORIGIN}/openapi.json
...                 origin=${ORIGIN}
...                 base_path=${EMPTY}
...                 mappings_path=${ROOT}/tests/user_implemented/custom_user_mappings.py
Variables       ${ROOT}/tests/variables.py


*** Variables ***
${ORIGIN}=      http://localhost:8000


*** Test Cases ***
Test Generated Keywords: Get Employees
    ${response}=    Get Employees
    Should Be Equal As Integers    ${response.status_code}    200

Test Generated Keywords: Post Employee
    VAR    &{body}    name=Robin the Robot
    ${response}=    Post Employee    body=${body}
    # ${response}=    Post Employee    name=Robin the Robot
    Should Be Equal As Integers    ${response.status_code}    201
    Should Be Equal    ${response.json()}[name]    Robin the Robot

Test Generated Keywords: Get Employee
    ${response}=    Get Employee
    Should Be Equal As Integers    ${response.status_code}    200

Test Generated Keywords: Patch Employee
    ${employee_id}=    Get Valid Id For Path    path=/employees/{employee_id}
    VAR    &{body}    date_of_birth=2021-12-31
    ${response}=    Patch Employee    employee_id=${employee_id}    body=${body}
    # ${response}=    Patch Employee    employee_id=${employee_id}    date_of_birth=2021-12-31
    Should Be Equal As Integers    ${response.status_code}    403

Test Generated Keywords: Post WageGroup
    VAR    &{body}    hourly_rate=99.99
    ${response}=    Post Wagegroup    body=${body}
    # ${response}=    Post Wagegroup    hourly_rate=99.99
    Should Be Equal As Integers    ${response.status_code}    201
    Should Be Equal As Numbers    ${response.json()}[hourly-rate]    99.99

Test Generated Keywords: Get Energy Label
    ${response}=    Get Energy Label
    ...    zipcode=1111AA
    ...    home_number=10
    ...    extension=too long to be acceptable
    ...    validate_against_schema=${FALSE}
    Should Be Equal As Integers    ${response.status_code}    422

    VAR    @{omit}    extension
    ${response}=    Get Energy Label
    ...    zipcode=1111AA
    ...    home_number=10
    ...    extension=too long to be acceptable
    ...    omit_parameters=${omit}
    Should Be Equal As Integers    ${response.status_code}    200
</code></pre></div>
</div>
            </div>

            <div id="driver" class="tabcontent">
                <div class="secondary-background">
<h1>OpenApiDriver for Robot Framework</h1>

OpenApiDriver is an extension of the Robot Framework DataDriver library that allows
for generation and execution of test cases based on the information in an OpenAPI document.

For more information about the DataDriver library, see
https://github.com/Snooz82/robotframework-datadriver.

<blockquote>
Keyword documentation for OpenApiDriver can be found <a href="openapidriver.html" target="_blank">here</a>.
</blockquote>

<h2>Introduction</h2>

My RoboCon 2022 talk about OpenApiDriver and OpenApiLibCore can be found
<a href="https://www.youtube.com/watch?v=7YWZEHxk9Ps" target="_blank">here</a>.

For more information about Robot Framework, see http://robotframework.org.

<hr>

<h2>Installation</h2>

If you already have Python >= 3.10 with pip installed, you can simply run:

<div class="code-block"><pre><code class="language-shell">pip install --upgrade robotframework-openapitools</code></pre></div>

<hr>

<h2>OpenAPI (aka Swagger)</h2>

The OpenAPI Specification (OAS) defines a standard, language-agnostic interface
to RESTful APIs, see https://www.openapis.org/

The OpenApiTools libraries implement a number of Robot Framework keywords that make it
easy to interact with an OpenAPI implementation by using the information in the
OpenAPI document (previously: Swagger file), for examply by automatic generation of
valid values for requests based on the schema information in the document.

<blockquote><i>
Note: The OpenApiTools libraries are designed for APIs based on the OAS v3.
The libraries have not been tested for APIs based on the OAS v2.
</i></blockquote>

<hr>

<h2>Getting started</h2>

Before trying to use the keywords exposed by any of the libraries from OpenApiTools on
the target API, it's recommended to first ensure that the OpenAPI document for the API
is valid under the OpenAPI Specification.

This can be done using the command line interface of the <code>prance</code> package
that is installed as a prerequisite for OpenApiTools.
Both a local openapi.json or openapi.yaml file or one hosted by the API server
can be checked using the <code>prance validate <reference_to_file></code> shell command:

<div class="code-block"><pre><code class="language-shell">
(.venv) prance validate --backend=openapi-spec-validator http://localhost:8000/openapi.json

Processing "http://localhost:8000/openapi.json"...
 -> Resolving external references.
Validates OK as OpenAPI 3.0.2!

(.venv) prance validate --backend=openapi-spec-validator /tests/files/petstore_openapi.yaml

Processing "/tests/files/petstore_openapi.yaml"...
 -> Resolving external references.
Validates OK as OpenAPI 3.0.2!

</code></pre></div>

You'll have to change the url or file reference to the location of the openapi
document for your API.

<blockquote><i>
Note: Although recursion is technically allowed under the OAS, tool
support is limited and changing the OAS to not use recursion is recommended.
</i></blockquote>

Support for parsing OpenAPI documents with recursion in them is limited.
See the <code>recursion_limit</code> and <code>recursion_default</code> library
parameters for the available options.

If the OpenAPI document passes this validation, the next step is trying to do a test
run with a minimal test suite.
The examples below can be used with <code>source</code>, <code>origin</code>
and <code>path</code> altered to fit your situation.

<div class="code-block"><pre><code class="language-robotframework">
*** Settings ***
Library            OpenApiDriver
...                    source=http://localhost:8000/openapi.json
...                    origin=http://localhost:8000
Test Template      Validate Using Test Endpoint Keyword

*** Test Cases ***
Test Endpoint for ${method} on ${path} where ${status_code} is expected

*** Keywords ***
Validate Using Test Endpoint Keyword
    [Arguments]    ${path}    ${method}    ${status_code}
    Test Endpoint
    ...    path=${path}    method=${method}    status_code=${status_code}

</code></pre></div>

<div class="code-block"><pre><code class="language-robotframework">
*** Settings ***
Library            OpenApiLibCore
...                    source=http://localhost:8000/openapi.json
...                    origin=http://localhost:8000

*** Test Cases ***
Getting Started
    ${url}=    Get Valid Url    path=/employees/{employee_id}

</code></pre></div>

Running the above tests for the first time may result in an error / failed test.
You should look at the Robot Framework <code>log.html</code> to determine the reasons
for the failing tests.
Depending on the reasons for the failures, different solutions are possible.

The OpenApiTools libraries also support handling of relations between resources within
the scope of the API being validated as well as handling dependencies on resources
outside the scope of the API. In addition there is support for handling restrictions
on the values of parameters and properties.
This is supported by the <code>mappings_path</code> library parameter.
Details about the <code>mappings_path</code> parameter usage can be
found <a href="advanced_use.md" target="_blank">here</a>.

<hr>

<h2>Limitations</h2>

There are currently a number of limitations to supported API structures, supported data
types and properties.
The following list details the most important ones.
- Only JSON request and response bodies are supported.
- No support for per-path authorization levels (only simple 401 / 403 validation).

For all open issues please visit the OpenApiTools <a href="https://github.com/MarketSquare/robotframework-openapitools" target="_blank">GitHub page</a>.


</div>
            </div>

            <div id="libcore" class="tabcontent">
                <div class="secondary-background">
<h1>OpenApiLibCore for Robot Framework</h1>

The OpenApiLibCore library is a utility library that is meant to simplify creation
of other Robot Framework libraries for API testing based on the information in
an OpenAPI document.
Both OpenApiDriver and libraries generated using OpenApiLibGen rely on OpenApiLibCore
and its keywords for their functionality.
This document explains how to use the OpenApiLibCore library.

<blockquote>
Keyword documentation for OpenApiLibCore can be found <a href="openapi_libcore.html" target="_blank">here</a>.
</blockquote>

<h2>Introduction</h2>

My RoboCon 2022 talk about OpenApiDriver and OpenApiLibCore can be found
<a href="https://www.youtube.com/watch?v=7YWZEHxk9Ps" target="_blank">here</a>.

For more information about Robot Framework, see http://robotframework.org.

<hr>

<h2>Installation</h2>

If you already have Python >= 3.10 with pip installed, you can simply run:

<div class="code-block"><pre><code class="language-shell">pip install --upgrade robotframework-openapitools</code></pre></div>

<hr>

<h2>OpenAPI (aka Swagger)</h2>

The OpenAPI Specification (OAS) defines a standard, language-agnostic interface
to RESTful APIs, see https://www.openapis.org/

The OpenApiTools libraries implement a number of Robot Framework keywords that make it
easy to interact with an OpenAPI implementation by using the information in the
OpenAPI document (previously: Swagger file), for examply by automatic generation of
valid values for requests based on the schema information in the document.

<blockquote><i>
Note: The OpenApiTools libraries are designed for APIs based on the OAS v3.
The libraries have not been tested for APIs based on the OAS v2.
</i></blockquote>

<hr>

<h2>Getting started</h2>

Before trying to use the keywords exposed by any of the libraries from OpenApiTools on
the target API, it's recommended to first ensure that the OpenAPI document for the API
is valid under the OpenAPI Specification.

This can be done using the command line interface of the <code>prance</code> package
that is installed as a prerequisite for OpenApiTools.
Both a local openapi.json or openapi.yaml file or one hosted by the API server
can be checked using the <code>prance validate <reference_to_file></code> shell command:

<div class="code-block"><pre><code class="language-shell">
(.venv) prance validate --backend=openapi-spec-validator http://localhost:8000/openapi.json

Processing "http://localhost:8000/openapi.json"...
 -> Resolving external references.
Validates OK as OpenAPI 3.0.2!

(.venv) prance validate --backend=openapi-spec-validator /tests/files/petstore_openapi.yaml

Processing "/tests/files/petstore_openapi.yaml"...
 -> Resolving external references.
Validates OK as OpenAPI 3.0.2!

</code></pre></div>

You'll have to change the url or file reference to the location of the openapi
document for your API.

<blockquote><i>
Note: Although recursion is technically allowed under the OAS, tool
support is limited and changing the OAS to not use recursion is recommended.
</i></blockquote>

Support for parsing OpenAPI documents with recursion in them is limited.
See the <code>recursion_limit</code> and <code>recursion_default</code> library
parameters for the available options.

If the OpenAPI document passes this validation, the next step is trying to do a test
run with a minimal test suite.
The examples below can be used with <code>source</code>, <code>origin</code>
and <code>path</code> altered to fit your situation.

<div class="code-block"><pre><code class="language-robotframework">
*** Settings ***
Library            OpenApiDriver
...                    source=http://localhost:8000/openapi.json
...                    origin=http://localhost:8000
Test Template      Validate Using Test Endpoint Keyword

*** Test Cases ***
Test Endpoint for ${method} on ${path} where ${status_code} is expected

*** Keywords ***
Validate Using Test Endpoint Keyword
    [Arguments]    ${path}    ${method}    ${status_code}
    Test Endpoint
    ...    path=${path}    method=${method}    status_code=${status_code}

</code></pre></div>

<div class="code-block"><pre><code class="language-robotframework">
*** Settings ***
Library            OpenApiLibCore
...                    source=http://localhost:8000/openapi.json
...                    origin=http://localhost:8000

*** Test Cases ***
Getting Started
    ${url}=    Get Valid Url    path=/employees/{employee_id}

</code></pre></div>

Running the above tests for the first time may result in an error / failed test.
You should look at the Robot Framework <code>log.html</code> to determine the reasons
for the failing tests.
Depending on the reasons for the failures, different solutions are possible.

The OpenApiTools libraries also support handling of relations between resources within
the scope of the API being validated as well as handling dependencies on resources
outside the scope of the API. In addition there is support for handling restrictions
on the values of parameters and properties.
This is supported by the <code>mappings_path</code> library parameter.
Details about the <code>mappings_path</code> parameter usage can be
found <a href="advanced_use.md" target="_blank">here</a>.

<hr>

<h2>Limitations</h2>

There are currently a number of limitations to supported API structures, supported data
types and properties.
The following list details the most important ones.
- Only JSON request and response bodies are supported.
- No support for per-path authorization levels (only simple 401 / 403 validation).

For all open issues please visit the OpenApiTools <a href="https://github.com/MarketSquare/robotframework-openapitools" target="_blank">GitHub page</a>.


</div>
            </div>
        </article>
    </div>

    <script>
        function openDocs(evt, moduleName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(moduleName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        document.getElementById("defaultOpen").click();
    </script>
    <!-- Code highlighting -->
    <script src="code_highlighting/prism.js"></script>
</body>

</html>